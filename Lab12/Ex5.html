<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>

    function isNonNegativeInteger(inputString, returnErrors = false) {
    //Validate that an input value is a non-negative integer
    // inputString is input string; returnErrors indicates how the funciton returns: true means return
   
    errors = []; // assume no errors at first
    if(Number(inputString) != inputString) {
        errors.push('Not a number!'); // Check if string is a number value

    } 
   else{
    if(inputString < 0) errors.push('Negative value!'); // Check if it is non-negative
    if(parseInt(inputString) != inputString) errors.push('Not an integer!'); // Check that it is an integer
     } 
     return returnErrors ? errors : (errors.length == 0)
}

        function displayPurchase() {
            //Display the number of products purchased
            num_products= quantity_textbox.value;
            if(isNonNegativeInteger(num_products)) {
            document.write(`Thank you for purchasing ${num_products} things!`)
            }
        }
        
        function checkQuantityTextbox() {
            var errors = isNonNegativeInteger(document.getElementById("quantity_textbox").value,true);
            qty_textbox_message.innerHTML = errors;
        }
        
        let params = (new URL(document.location)).searchParams;
        GET = {};
        params.forEach(function (value, key) { GET[key] = value })
    
        if (typeof GET['quantity_textbox'] != 'undefined') {
            order = GET['quantity_textbox'];
            if (isNonNegativeInteger(order)) {
                
                window.location.href = "display_purchase.html" + document.location.search;

            }
        }
    //Check if the textbox exists
    if(param.has('quantity_textbox')){
        if(isNonNegativeInteger(params.get('quantity_textbox'))){
            window.location.href = "display_purchase.html" + document.location.search;
        }else {
                document.body.innerHTML = `Invalid quantity - try again`;
    }
}
    </script>

<form name="quantity_form" action="" method="get">
<Label>Quantity Desired</Label>
<input type="Text" name="quantity_textbox" onkeyup="checkQuantityTextbox();"> 
<span id='qty_textbox_message'>Enter a quantity</span>
<br>
<script>
   //if textbox exist
   if(param.has('quantity_textbox')){
        quantity_form.quantity_textbox.value = params.get('quantity_textbox');
        checkQuantityTextbox(quantity_form["quanitity_textbox"]);
    }
</script>
<input type="submit" value="Purchase">
</form>
</body>
</html>